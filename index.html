<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geo-Drifter: The Lost Compass</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Outfit:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1; --gold: #fbbf24; --heart: #ff4757;
            --bg: #0f172a; --card: #1e293b; --text: #f8fafc;
        }
        * { box-sizing: border-box; }
        body { 
            font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text);
            display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0;
        }
        #phone-frame {
            width: 380px; height: 750px; background: #000; border: 12px solid #334155;
            border-radius: 40px; position: relative; overflow: hidden; display: flex; flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
        }

        /* Top Bar */
        .status-bar { padding: 25px 20px 10px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); }
        .stat { display: flex; align-items: center; gap: 5px; font-weight: 900; }
        .gold-txt { color: var(--gold); }
        .hp-txt { color: var(--heart); }

        /* Story/Map Header */
        .story-header { padding: 15px; text-align: center; border-bottom: 1px solid #334155; }
        .story-header h1 { font-size: 0.8rem; font-family: 'Press Start 2P'; margin: 0; color: var(--primary); }
        
        /* The Shop (Modal-ish) */
        #shop-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: var(--bg); z-index: 100; padding: 30px; display: none;
        }
        .shop-item {
            background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 15px;
            display: flex; justify-content: space-between; align-items: center; border: 2px solid #334155;
        }
        .buy-btn { background: var(--gold); border: none; padding: 8px 12px; border-radius: 8px; font-weight: 900; cursor: pointer; }

        /* Game Slide */
        #game-content { flex-grow: 1; padding: 20px; display: flex; flex-direction: column; justify-content: center; }
        .card { 
            background: var(--card); padding: 25px; border-radius: 25px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.3); transition: 0.4s;
        }
        .q-tag { font-size: 0.7rem; font-weight: 900; color: var(--primary); letter-spacing: 2px; }
        h2 { font-size: 1.25rem; margin: 15px 0; line-height: 1.3; }
        
        .opt-list { display: grid; gap: 10px; }
        .opt { 
            background: #334155; border: none; color: white; padding: 15px; 
            border-radius: 15px; text-align: left; font-size: 1rem; cursor: pointer;
            transition: 0.2s; font-weight: 600;
        }
        .opt:hover { background: #475569; }
        .opt.correct { background: #10b981 !important; }
        .opt.wrong { background: #ef4444 !important; }

        /* Power Up Indicators */
        #power-badges { height: 30px; display: flex; gap: 10px; padding: 0 20px; }
        .badge { font-size: 0.6rem; background: #4f46e5; padding: 2px 8px; border-radius: 10px; display: none; }

        /* Quest Log Popup */
        #quest-log {
            position: absolute; bottom: 0; width: 100%; background: #1e293b;
            padding: 30px; border-top: 4px solid var(--gold); display: none; z-index: 50;
        }
        .next-btn { 
            width: 100%; background: var(--gold); border: none; padding: 15px; 
            border-radius: 15px; font-family: 'Press Start 2P'; font-size: 10px; margin-top: 15px;
        }
    </style>
</head>
<body>

<div id="phone-frame">
    <div class="status-bar">
        <div class="stat hp-txt">HP: <span id="hp-val">5</span></div>
        <div class="stat gold-txt">ðŸ’° <span id="gold-val">0</span></div>
        <button onclick="toggleShop()" style="background:none; border:1px solid #fff; color:#fff; border-radius:5px; font-size:10px;">SHOP</button>
    </div>

    <div id="power-badges">
        <span id="badge-shield" class="badge">SHIELD ACTIVE</span>
        <span id="badge-booster" class="badge">2X STREAK</span>
    </div>

    <div class="story-header">
        <h1 id="location-name">CURRENT REGION: START</h1>
    </div>

    <div id="game-content">
        </div>

    <div id="shop-overlay">
        <h2 style="font-family:'Press Start 2P'; font-size: 15px;">TRADER'S POST</h2>
        <p style="font-size: 0.8rem; opacity: 0.7;">Spend gold to survive the journey.</p>
        <div class="shop-item">
            <div><strong>Life Potion</strong><br><small>+1 Heart</small></div>
            <button class="buy-btn" onclick="buyItem('health', 100)">100G</button>
        </div>
        <div class="shop-item">
            <div><strong>Streak Booster</strong><br><small>Double Gold from streaks</small></div>
            <button class="buy-btn" onclick="buyItem('booster', 250)">250G</button>
        </div>
        <div class="shop-item">
            <div><strong>Amulet of Shield</strong><br><small>Prevents 1 wrong answer death</small></div>
            <button class="buy-btn" onclick="buyItem('shield', 400)">400G</button>
        </div>
        <button class="next-btn" onclick="toggleShop()">EXIT SHOP</button>
    </div>

    <div id="quest-log">
        <strong style="color:var(--gold)">MAP INSIGHT:</strong>
        <p id="insight-text" style="font-size: 0.9rem; margin: 10px 0;"></p>
        <button class="next-btn" onclick="closeLog()">CONTINUE QUEST</button>
    </div>
</div>

<script>
    const database = [
        { c: "AFRICA", q: "Where does the world's largest lion population live?", a: "The Serengeti", o: ["The Serengeti", "Kruger", "Sahara", "Okavango"], x: "The Serengeti is a grassland in Tanzania famous for its massive wildebeest migration." },
        { c: "AFRICA", q: "What is the capital of Ethiopia?", a: "Addis Ababa", o: ["Nairobi", "Addis Ababa", "Asmara", "Lagos"], x: "Addis Ababa serves as the political and commercial heart of Ethiopia." },
        { c: "ASIA", q: "What is the largest city in the UAE?", a: "Dubai", o: ["Abu Dhabi", "Dubai", "Sharjah", "Doha"], x: "While Abu Dhabi is the capital, Dubai is the most populous city." },
        { c: "ASIA", q: "Where do the Tigris and Euphrates meet?", a: "Southern Iraq", o: ["Turkey", "Syria", "Southern Iraq", "Iran"], x: "This historic confluence occurs in southern Iraq before reaching the Persian Gulf." },
        { c: "ASIA", q: "The Gobi Desert stretches across China and...", a: "Mongolia", o: ["Mongolia", "Russia", "Kazakhstan", "India"], x: "The Gobi is a vast, cold desert spanning northern China and southern Mongolia." },
        { c: "ASIA", q: "What do people in Hong Kong primarily speak?", a: "Cantonese", o: ["Mandarin", "Cantonese", "Hakka", "English"], x: "Cantonese is the prestige variety of Chinese spoken in the south." },
        { c: "ASIA", q: "Ankara and Istanbul are located in which country?", a: "Turkey", o: ["Turkey", "Greece", "Egypt", "Jordan"], x: "Ankara is the capital, while Istanbul bridges Europe and Asia." },
        { c: "ASIA", q: "What is Indonesia's largest island by area (entirely held)?", a: "Sumatra", o: ["Java", "Bali", "Sumatra", "Lombok"], x: "Sumatra is the largest island that belongs 100% to Indonesia." },
        { c: "ASIA", q: "Which city's coat of arms features a snow leopard?", a: "Almaty", o: ["Astana", "Almaty", "Baku", "Tashkent"], x: "Almaty is a major city in Kazakhstan and a former capital." },
        { c: "ASIA", q: "What was Mumbai formerly called?", a: "Bombay", o: ["Calcutta", "Madras", "Bombay", "Bangalore"], x: "Mumbai was officially renamed from Bombay in 1995." },
        { c: "OCEANIA", q: "What is the capital of Samoa?", a: "Apia", o: ["Suva", "Apia", "Nuku'alofa", "Honiara"], x: "Apia is the capital and largest city of Samoa, a Polynesian nation." },
        { c: "OCEANIA", q: "What are Australia's two largest cities?", a: "Sydney and Melbourne", o: ["Sydney and Melbourne", "Perth and Sydney", "Melbourne and Brisbane", "Canberra and Sydney"], x: "Sydney and Melbourne are the primary financial and cultural hubs of Australia." },
        { c: "EUROPE", q: "Which non-EU country is Western Europe's largest?", a: "Switzerland", o: ["Norway", "United Kingdom", "Switzerland", "Iceland"], x: "Switzerland remains neutral and is not a member of the European Union." },
        { c: "EUROPE", q: "Where is the 'Running of the Bulls' held?", a: "Pamplona", o: ["Madrid", "Barcelona", "Pamplona", "Seville"], x: "This event takes place annually in Pamplona, northern Spain." },
        { c: "EUROPE", q: "Which capital is famous for its many canals?", a: "Amsterdam", o: ["Venice", "Amsterdam", "Copenhagen", "Bruges"], x: "Amsterdam is the capital of the Netherlands and is built on water." },
        { c: "EUROPE", q: "Kyiv is the capital of which country?", a: "Ukraine", o: ["Poland", "Ukraine", "Belarus", "Russia"], x: "Kyiv is the capital of Ukraine, which includes the Crimean Peninsula." },
        { c: "EUROPE", q: "The Nobel Peace Prize is awarded in which city?", a: "Oslo", o: ["Stockholm", "Oslo", "Geneva", "Paris"], x: "Unlike other Nobels, the Peace Prize ceremony is held in Oslo, Norway." },
        { c: "EUROPE", q: "Which city was a hub for the Industrial Revolution?", a: "Manchester", o: ["London", "Liverpool", "Manchester", "Birmingham"], x: "Manchester, England's 3rd largest city, was at the heart of industrial history." },
        { c: "USA", q: "Where was Earth's hottest temperature recorded?", a: "Furnace Creek", o: ["Sahara", "Furnace Creek", "Lut Desert", "Dubai"], x: "Furnace Creek in Death Valley, California, holds the world record." },
        { c: "USA", q: "The Denali Star rail service is in which state?", a: "Alaska", o: ["Colorado", "Alaska", "Washington", "Montana"], x: "The Denali Star is a premier passenger train in Alaska." },
        { c: "USA", q: "Portland, Oregon sits near the mouth of which river?", a: "Willamette River", o: ["Columbia", "Willamette River", "Snake", "Missouri"], x: "The Willamette River flows through the center of Portland." },
        { c: "USA", q: "Which dam creates Lake Mead?", a: "Hoover Dam", o: ["Grand Coulee", "Hoover Dam", "Glen Canyon", "Fort Peck"], x: "The Hoover Dam on the Colorado River creates the largest U.S. reservoir." },
        { c: "USA", q: "What is the longest river in the U.S.?", a: "Missouri River", o: ["Mississippi", "Missouri River", "Rio Grande", "Colorado"], x: "The Missouri is slightly longer than the Mississippi." },
        { c: "CANADA", q: "The CN Tower is in which province?", a: "Ontario", o: ["Quebec", "Ontario", "Alberta", "BC"], x: "Ontario is the most populous province in Canada." },
        { c: "LATIN AMER", q: "What is the primary river of Venezuela?", a: "Orinoco", o: ["Amazon", "Orinoco", "Parana", "Magdalena"], x: "The Orinoco is one of the longest rivers in South America." },
        { c: "LATIN AMER", q: "What is the world's longest continental mountain range?", a: "The Andes", o: ["The Rockies", "The Andes", "The Himalayas", "The Alps"], x: "The Andes run the entire length of South America's west coast." },
        { c: "CARIBBEAN", q: "What is the capital of Barbados?", a: "Bridgetown", o: ["Nassau", "Kingston", "Bridgetown", "Castries"], x: "Bridgetown is the capital of Barbados, located in the Atlantic/Caribbean." },
        { c: "LATIN AMER", q: "AsunciÃ³n is the capital of which country?", a: "Paraguay", o: ["Uruguay", "Paraguay", "Bolivia", "Chile"], x: "Paraguay is bordered by Brazil, Argentina, and Bolivia." }
    ];

    let currentIdx = 0;
    let gold = 0;
    let hp = 5;
    let streak = 0;
    let powerUps = { shield: false, booster: false };
    let shuffledDeck = [];

    function init() {
        shuffledDeck = database.sort(() => Math.random() - 0.5);
        render();
    }

    function render() {
        if (currentIdx >= shuffledDeck.length) { alert("YOU WON THE GAME!"); location.reload(); return; }
        const d = shuffledDeck[currentIdx];
        document.getElementById('location-name').innerText = `REGION: ${d.c}`;
        const content = document.getElementById('game-content');
        
        let options = [...d.o].sort(() => Math.random() - 0.5);

        content.innerHTML = `
            <div class="card">
                <span class="q-tag">QUEST ${currentIdx + 1}/${shuffledDeck.length}</span>
                <h2>${d.q}</h2>
                <div class="opt-list">
                    ${options.map(o => `<button class="opt" onclick="check(this, '${o}')">${o}</button>`).join('')}
                </div>
            </div>
        `;
    }

    function check(btn, choice) {
        const d = shuffledDeck[currentIdx];
        const all = document.querySelectorAll('.opt');
        all.forEach(b => b.disabled = true);

        if (choice === d.a) {
            btn.classList.add('correct');
            let reward = 50 + (streak * 10);
            if (powerUps.booster) reward *= 2;
            gold += reward;
            streak++;
            updateStats();
            setTimeout(next, 600);
        } else {
            if (powerUps.shield) {
                powerUps.shield = false;
                document.getElementById('badge-shield').style.display = 'none';
                alert("SHIELD BROKEN! You survived.");
            } else {
                hp--;
                streak = 0;
                btn.classList.add('wrong');
            }
            
            updateStats();
            all.forEach(b => { if(b.innerText === d.a) b.classList.add('correct'); });
            
            document.getElementById('insight-text').innerText = d.x;
            document.getElementById('quest-log').style.display = 'block';

            if (hp <= 0) { alert("GAME OVER. Try again traveler."); location.reload(); }
        }
    }

    function updateStats() {
        document.getElementById('hp-val').innerText = hp;
        document.getElementById('gold-val').innerText = gold;
    }

    function next() {
        currentIdx++;
        render();
    }

    function closeLog() {
        document.getElementById('quest-log').style.display = 'none';
        next();
    }

    function toggleShop() {
        const shop = document.getElementById('shop-overlay');
        shop.style.display = (shop.style.display === 'block') ? 'none' : 'block';
    }

    function buyItem(type, cost) {
        if (gold < cost) { alert("Not enough gold!"); return; }
        gold -= cost;
        if (type === 'health') hp++;
        if (type === 'booster') { powerUps.booster = true; document.getElementById('badge-booster').style.display = 'block'; }
        if (type === 'shield') { powerUps.shield = true; document.getElementById('badge-shield').style.display = 'block'; }
        updateStats();
        alert("Purchase Successful!");
    }

    init();
</script>
</body>
</html>
