<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoQuest: The Legend of the 7 Continents</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4f46e5; --success: #10b981; --danger: #ef4444;
            --gold: #fbbf24; --bg: #020617; --card: #1e293b;
        }
        * { box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; background-color: var(--bg); color: white;
            display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden;
        }
        
        /* Game Map/World */
        #game-world {
            width: 100%; max-width: 600px; height: 90vh; background: #0f172a;
            border: 4px solid #334155; border-radius: 20px; position: relative;
            display: flex; flex-direction: column; overflow: hidden;
        }

        /* Top HUD */
        .hud {
            padding: 20px; background: rgba(0,0,0,0.5); font-family: 'Press Start 2P', cursive;
            font-size: 8px; display: flex; justify-content: space-between; border-bottom: 2px solid #334155;
        }
        .stat-val { color: var(--gold); font-size: 10px; }

        /* Progress Path */
        .map-path {
            height: 60px; background: #1e293b; display: flex; align-items: center; padding: 0 20px;
            position: relative; border-bottom: 1px solid #334155;
        }
        #player-sprite {
            font-size: 24px; position: absolute; left: 0%; transition: left 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Card Slide System */
        #card-container {
            flex-grow: 1; display: flex; justify-content: center; align-items: center; padding: 20px;
            perspective: 1000px;
        }
        .card {
            background: var(--card); width: 100%; padding: 25px; border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-bottom: 5px solid #000;
            transition: transform 0.4s, opacity 0.4s;
        }
        .card.exit { transform: translateX(-120%) rotate(-10deg); opacity: 0; }
        .card.enter { transform: scale(0.8); opacity: 0; }

        .category-tag {
            display: inline-block; background: var(--primary); padding: 5px 10px;
            border-radius: 5px; font-size: 10px; font-family: 'Press Start 2P'; margin-bottom: 15px;
        }

        h2 { font-size: 1.2rem; margin-bottom: 20px; line-height: 1.4; font-weight: 900; }

        .options-grid { display: grid; gap: 12px; }
        .btn-opt {
            background: #334155; border: 2px solid transparent; color: white; padding: 15px;
            border-radius: 10px; cursor: pointer; text-align: left; font-weight: bold; font-size: 1rem;
            transition: 0.2s;
        }
        .btn-opt:hover { background: #475569; transform: translateY(-2px); }
        .btn-opt.correct { background: var(--success) !important; animation: bounce 0.4s; }
        .btn-opt.wrong { background: var(--danger) !important; }

        /* Quest Log (Explanations) */
        #quest-log {
            position: absolute; bottom: 0; left: 0; width: 100%; background: #000;
            border-top: 3px solid var(--gold); padding: 20px; display: none; z-index: 10;
        }
        #quest-log h3 { font-family: 'Press Start 2P'; font-size: 10px; color: var(--gold); margin-top: 0; }
        #quest-log p { font-size: 0.9rem; margin-bottom: 15px; color: #cbd5e1; }
        .next-btn {
            background: var(--gold); color: black; border: none; padding: 10px 20px;
            font-family: 'Press Start 2P'; font-size: 8px; cursor: pointer; width: 100%;
        }

        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .shake { animation: shake 0.4s; }
        @keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(10px); } 50% { transform: translateX(-10px); } 100% { transform: translateX(0); } }
    </style>
</head>
<body>

<div id="game-world">
    <div class="hud">
        <div>HP: <span id="hp" class="stat-val">‚ù§‚ù§‚ù§</span></div>
        <div>GOLD: <span id="gold" class="stat-val">0</span></div>
        <div>STREAK: <span id="streak" class="stat-val">0</span></div>
    </div>

    <div class="map-path">
        <div id="player-sprite">üåç</div>
        <div style="position:absolute; right: 20px;">üèÅ</div>
    </div>

    <div id="card-container">
        </div>

    <div id="quest-log">
        <h3>QUEST LOG UPDATED</h3>
        <p id="log-text"></p>
        <button class="next-btn" onclick="nextSlide()">CONTINUE EXPEDITION</button>
    </div>
</div>

<script>
    const database = [
        { c: "AFRICA", q: "Where does the world's largest lion population live?", a: "The Serengeti", o: ["The Serengeti", "Kruger", "Sahara", "Okavango"], x: "The Serengeti is a grassland in Tanzania famous for its wildebeest migration." },
        { c: "AFRICA", q: "What is the capital of Ethiopia?", a: "Addis Ababa", o: ["Nairobi", "Addis Ababa", "Asmara", "Lagos"], x: "Addis Ababa serves as the political and commercial heart of Ethiopia." },
        { c: "ASIA", q: "What is the largest city in the UAE?", a: "Dubai", o: ["Abu Dhabi", "Dubai", "Sharjah", "Doha"], x: "While Abu Dhabi is the capital, Dubai is the most populous city." },
        { c: "ASIA", q: "Where do the Tigris and Euphrates meet?", a: "Southern Iraq", o: ["Turkey", "Syria", "Southern Iraq", "Iran"], x: "This historic confluence occurs in southern Iraq before reaching the Persian Gulf." },
        { c: "ASIA", q: "The Gobi Desert stretches across China and...", a: "Mongolia", o: ["Mongolia", "Russia", "Kazakhstan", "India"], x: "The Gobi is a vast, cold desert spanning northern China and southern Mongolia." },
        { c: "ASIA", q: "What do people in Hong Kong primarily speak?", a: "Cantonese", o: ["Mandarin", "Cantonese", "Hakka", "English"], x: "Cantonese is the prestige variety of Chinese spoken in the south." },
        { c: "ASIA", q: "Ankara and Istanbul are located in which country?", a: "Turkey", o: ["Turkey", "Greece", "Egypt", "Jordan"], x: "Ankara is the capital, while Istanbul bridges Europe and Asia." },
        { c: "ASIA", q: "What is Indonesia's largest island by area (entirely held)?", a: "Sumatra", o: ["Java", "Bali", "Sumatra", "Lombok"], x: "Sumatra is the largest island that belongs 100% to Indonesia." },
        { c: "ASIA", q: "Which city's coat of arms features a snow leopard?", a: "Almaty", o: ["Astana", "Almaty", "Baku", "Tashkent"], x: "Almaty is a major city in Kazakhstan and a former capital." },
        { c: "ASIA", q: "What was Mumbai formerly called?", a: "Bombay", o: ["Calcutta", "Madras", "Bombay", "Bangalore"], x: "Mumbai was officially renamed from Bombay in 1995." },
        { c: "OCEANIA", q: "What is the capital of Samoa?", a: "Apia", o: ["Suva", "Apia", "Nuku'alofa", "Honiara"], x: "Apia is the capital and largest city of Samoa, a Polynesian nation." },
        { c: "OCEANIA", q: "What are Australia's two largest cities?", a: "Sydney and Melbourne", o: ["Sydney and Melbourne", "Perth and Sydney", "Melbourne and Brisbane", "Canberra and Sydney"], x: "Sydney and Melbourne are the primary financial and cultural hubs of Australia." },
        { c: "EUROPE", q: "Which non-EU country is Western Europe's largest?", a: "Switzerland", o: ["Norway", "United Kingdom", "Switzerland", "Iceland"], x: "Switzerland remains neutral and is not a member of the European Union." },
        { c: "EUROPE", q: "Where is the 'Running of the Bulls' held?", a: "Pamplona", o: ["Madrid", "Barcelona", "Pamplona", "Seville"], x: "This event takes place annually in Pamplona, northern Spain." },
        { c: "EUROPE", q: "Which capital is famous for its many canals?", a: "Amsterdam", o: ["Venice", "Amsterdam", "Copenhagen", "Bruges"], x: "Amsterdam is the capital of the Netherlands and is built on water." },
        { c: "EUROPE", q: "Kyiv is the capital of which country?", a: "Ukraine", o: ["Poland", "Ukraine", "Belarus", "Russia"], x: "Kyiv is the capital of Ukraine, which includes the Crimean Peninsula." },
        { c: "EUROPE", q: "The Nobel Peace Prize is awarded in which city?", a: "Oslo", o: ["Stockholm", "Oslo", "Geneva", "Paris"], x: "Unlike other Nobels, the Peace Prize ceremony is held in Oslo, Norway." },
        { c: "EUROPE", q: "Which city was a hub for the Industrial Revolution?", a: "Manchester", o: ["London", "Liverpool", "Manchester", "Birmingham"], x: "Manchester, England's 3rd largest city, was at the heart of industrial history." },
        { c: "USA", q: "Where was Earth's hottest temperature recorded?", a: "Furnace Creek", o: ["Sahara", "Furnace Creek", "Lut Desert", "Dubai"], x: "Furnace Creek in Death Valley, California, holds the world record." },
        { c: "USA", q: "The Denali Star rail service is in which state?", a: "Alaska", o: ["Colorado", "Alaska", "Washington", "Montana"], x: "The Denali Star is a premier passenger train in Alaska." },
        { c: "USA", q: "Portland, Oregon sits near the mouth of which river?", a: "Willamette River", o: ["Columbia", "Willamette River", "Snake", "Missouri"], x: "The Willamette River flows through the center of Portland." },
        { c: "USA", q: "Which dam creates Lake Mead?", a: "Hoover Dam", o: ["Grand Coulee", "Hoover Dam", "Glen Canyon", "Fort Peck"], x: "The Hoover Dam on the Colorado River creates the largest U.S. reservoir." },
        { c: "USA", q: "What is the longest river in the U.S.?", a: "Missouri River", o: ["Mississippi", "Missouri River", "Rio Grande", "Colorado"], x: "The Missouri is slightly longer than the Mississippi." },
        { c: "CANADA", q: "The CN Tower is in which province?", a: "Ontario", o: ["Quebec", "Ontario", "Alberta", "BC"], x: "Ontario is the most populous province in Canada." },
        { c: "LATIN AMER", q: "What is the primary river of Venezuela?", a: "Orinoco", o: ["Amazon", "Orinoco", "Parana", "Magdalena"], x: "The Orinoco is one of the longest rivers in South America." },
        { c: "LATIN AMER", q: "What is the world's longest continental mountain range?", a: "The Andes", o: ["The Rockies", "The Andes", "The Himalayas", "The Alps"], x: "The Andes run the entire length of South America's west coast." },
        { c: "CARIBBEAN", q: "What is the capital of Barbados?", a: "Bridgetown", o: ["Nassau", "Kingston", "Bridgetown", "Castries"], x: "Bridgetown is the capital of Barbados, located in the Atlantic/Caribbean." },
        { c: "LATIN AMER", q: "Asunci√≥n is the capital of which country?", a: "Paraguay", o: ["Uruguay", "Paraguay", "Bolivia", "Chile"], x: "Paraguay is bordered by Brazil, Argentina, and Bolivia." }
    ];

    let currentIdx = 0;
    let hp = 3;
    let gold = 0;
    let streak = 0;
    let deck = [];

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function initGame() {
        deck = shuffle([...database]);
        renderCard();
    }

    function renderCard() {
        if (currentIdx >= deck.length) {
            showEnd(true);
            return;
        }
        const data = deck[currentIdx];
        const container = document.getElementById('card-container');
        container.innerHTML = `
            <div class="card enter" id="active-card">
                <span class="category-tag">${data.c}</span>
                <h2>${data.q}</h2>
                <div class="options-grid">
                    ${shuffle(data.o).map(opt => `<button class="btn-opt" onclick="checkChoice(this, '${opt}')">${opt}</button>`).join('')}
                </div>
            </div>
        `;
        setTimeout(() => document.getElementById('active-card').classList.remove('enter'), 50);
        document.getElementById('player-sprite').style.left = `${(currentIdx / deck.length) * 90}%`;
    }

    function checkChoice(btn, choice) {
        const data = deck[currentIdx];
        const allBtns = document.querySelectorAll('.btn-opt');
        allBtns.forEach(b => b.disabled = true);

        if (choice === data.a) {
            btn.classList.add('correct');
            gold += (10 * (streak + 1));
            streak++;
            document.getElementById('gold').innerText = gold;
            document.getElementById('streak').innerText = streak;
            setTimeout(nextSlide, 800);
        } else {
            btn.classList.add('wrong');
            hp--;
            streak = 0;
            document.getElementById('hp').innerText = "‚ù§".repeat(Math.max(0, hp)) + "üñ§".repeat(3 - hp);
            document.getElementById('streak').innerText = streak;
            document.getElementById('game-world').classList.add('shake');
            setTimeout(() => document.getElementById('game-world').classList.remove('shake'), 400);
            
            // Show correct answer
            allBtns.forEach(b => { if(b.innerText === data.a) b.classList.add('correct'); });

            // Show Log
            document.getElementById('log-text').innerText = data.x;
            document.getElementById('quest-log').style.display = 'block';

            if (hp <= 0) {
                setTimeout(() => showEnd(false), 1000);
            }
        }
    }

    function nextSlide() {
        document.getElementById('quest-log').style.display = 'none';
        const card = document.getElementById('active-card');
        if (card) card.classList.add('exit');
        
        setTimeout(() => {
            currentIdx++;
            renderCard();
        }, 400);
    }

    function showEnd(victory) {
        const title = victory ? "EXPEDITION CLEAR!" : "YOU DIED";
        const rank = gold > 400 ? "GOD OF MAPS" : "NOVICE TRAVELER";
        document.getElementById('game-world').innerHTML = `
            <div style="text-align:center; padding: 50px; font-family:'Press Start 2P';">
                <h1 style="color:${victory ? 'var(--success)' : 'var(--danger)'}">${title}</h1>
                <p style="font-size:10px">FINAL GOLD: ${gold}</p>
                <p style="font-size:10px; color:var(--gold)">RANK: ${rank}</p>
                <button class="next-btn" style="margin-top:20px" onclick="location.reload()">RESTART QUEST</button>
            </div>
        `;
    }

    initGame();
</script>

</body>
</html>
